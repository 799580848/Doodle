language: python
sudo: false
cache:
  directories:
    - bin
    - eggs
    - downloads
python:
  - 2.7
services:
  - redis-server
install:
  - mv doodle/config/test_sample.py doodle/config/test.py
  - |
    if [ ! -f bin/buildout ]; then
      wget -q https://bootstrap.pypa.io/bootstrap-buildout.py && python bootstrap-buildout.py --setuptools-to-dir downloads
    fi
  - bin/buildout -N
script:
  - bin/py.test -v doodle/tests
